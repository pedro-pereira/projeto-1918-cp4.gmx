<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_lily_down_stopped</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>15</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Inicializacao de variaveis
hsp = 8;
vsp = 8;

// Iniciando a imagem
sprite_index = spr_lily_down_stopped;
image_speed = 0.07;

// Quantidade de itens JÁ coletados
contador = 0;

// Quantidade de itens NECESSÁRIOS para ganhar
ja_pode_ganhar = 3;


// Se esta em PAUSE ou NAO.
pause = false;

audio_play_sound(som_fundo, 1, true);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Caso Geral

// Entradas
direita   = keyboard_check (vk_right);
direitaR  = keyboard_check_released (vk_right);      //essas sao as entradas de teclas
esquerda  = keyboard_check (vk_left);
esquerdaR = keyboard_check_released (vk_left);
cima      = keyboard_check (vk_up);
cimaR     = keyboard_check_released (vk_up);        //as released sao pra animaçao 
baixo     = keyboard_check (vk_down);               //parar quando a gente soltar a tecla
baixoR    = keyboard_check_released (vk_down);
reset     = keyboard_check_released (vk_escape);

// Movimentos

ims = 0.5;

if(!direita or !esquerda) {      //isso aq eu n entendi, mas so funciona assim
    hspeed = 0;
}

if(!cima or !baixo) {
    vspeed = 0;
}

// Posicoes de IDLE

if(cimaR &amp;&amp; !direita &amp;&amp; !baixo &amp;&amp; !esquerda &amp;&amp; !pause) {
    vspeed = 0;
    sprite_index = -1;
    sprite_index = spr_lily_up_stopped;
    image_speed = 0.07;
}

if(!cima &amp;&amp; direitaR &amp;&amp; !baixo &amp;&amp; !esquerda &amp;&amp; !pause) {
    hspeed = 0;
    sprite_index = -1;
    sprite_index = spr_lily_right_stopped;
    image_speed = 0.07;
}

if(!cima &amp;&amp; !direita &amp;&amp; baixoR &amp;&amp; !esquerda &amp;&amp; !pause) {
    hspeed = 0;
    sprite_index = -1;
    sprite_index = spr_lily_down_stopped;
    image_speed = 0.07;
}

if(!cima &amp;&amp; !direita &amp;&amp; !baixo &amp;&amp; esquerdaR &amp;&amp; !pause) {
    hspeed = 0;
    sprite_index = -1;
    sprite_index = spr_lily_left_stopped;
    image_speed = 0.07;
}



// Movimentos

if(cima &amp;&amp; !pause) {
    vspeed = -vsp;
    sprite_index = spr_lily_up;
    image_speed = ims;
}

if(direita &amp;&amp; !pause) {
    hspeed = hsp;
    sprite_index = spr_lily_right;
    image_speed = ims;
}

if(baixo &amp;&amp; !pause) {
    vspeed = vsp;
    sprite_index = spr_lily_down;
    image_speed = ims;
}

if(esquerda &amp;&amp; !pause) {
    hspeed = -hsp;
    sprite_index = spr_lily_left;
    image_speed = ims;
}


// Parar a animaçao ao abrir as cutscenes
if(pause) {
    image_speed = 0;
}

// Reset
if reset {
    game_restart();
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Caso Vitoria

/* 
esse é o gatilho da vitoria: a cada item que ela pega,
a variavel v contador aumenta em 1(isso tem em cada um dos itens)
e quando ela tiver os 3, ficar na frente da benson e apertar a tecla espaço
o jogo vai entrar no modo vitoria e enfim, aparece o que for aparecer :)
*/

if(contador == ja_pode_ganhar) {
    
    with(obj_mensagem) {
        obj_mensagem.opacidade = 1;
    }
    
    with(obj_temporizador){
        audio_play_sound(som_alarme, 1, false);
        obj_temporizador.habilitado = true;    
    }
    
    ja_pode_ganhar = 1000;
}

if (contador == 3 &amp;&amp; place_meeting(x - 32, y - 32, obj_benson)) {

    audio_stop_all();

    // Vai para a room de vitoria.
    room_goto(room_cutscene_vitoria);
    
    audio_play_sound(som_vitoria, 1, false);
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Caso Game Over

// esse é o gatilho da derrota, que é basicamente a colisao com o policial
if place_meeting(x, y, obj_policial_hori) or place_meeting(x, y, obj_policial_vert) {

    with(obj_policial_hori) {         
        obj_policial_hori.pause = true;
    }
    
    with(obj_policial_vert) {         
        obj_policial_vert.pause = true;
    }
    
    with(obj_lily) {         
        obj_lily.pause = true;
    }

    audio_stop_all();
    
    // Vai para a room de derrota.
    room_goto(room_cutscene_derrota);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_benson">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Colisao com a Benson
move_contact_solid(direction, 0);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_colisor">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Colisao com os colisores
move_contact_solid(direction, 0);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
